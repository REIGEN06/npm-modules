{"version":3,"file":"useDocumentVisibility.umd.js","sources":["../src/useDocumentVisibility.ts"],"sourcesContent":["import { useEffect, useRef, useState } from \"react\";\r\n\r\ntype Callback = (isVisible: boolean) => void;\r\n\r\ninterface HookTypes {\r\n  count: number;\r\n  visible: boolean;\r\n  onVisibilityChange: (callback: Callback) => void;\r\n}\r\n\r\nexport const useDocumentVisibility = (): HookTypes => {\r\n  const [count, setCount] = useState(0);\r\n  const [visible, setVisible] = useState(true);\r\n  const onVisibilityCallback = useRef<Callback[]>([]);\r\n\r\n  const increment = () => setCount((currentCount) => currentCount + 1);\r\n\r\n  const onVisibilityChange = (callback: Callback) => {\r\n    onVisibilityCallback.current.push(callback);\r\n  };\r\n\r\n  const DocumentVisibilityHandle = (): void => {\r\n    setVisible(document.visibilityState === \"visible\");\r\n    if (document.hidden) {\r\n      increment();\r\n    }\r\n    onVisibilityCallback.current.forEach((callback) =>\r\n      callback(document.visibilityState === \"visible\")\r\n    );\r\n  };\r\n\r\n  useEffect(() => {\r\n    document.addEventListener(\"visibilitychange\", DocumentVisibilityHandle);\r\n    return () => {\r\n      document.removeEventListener(\r\n        \"visibilitychange\",\r\n        DocumentVisibilityHandle\r\n      );\r\n    };\r\n  }, []);\r\n\r\n  return { count, visible, onVisibilityChange };\r\n};\r\n"],"names":["_useState","useState","count","setCount","_useState2","visible","setVisible","onVisibilityCallback","useRef","DocumentVisibilityHandle","document","visibilityState","hidden","currentCount","current","forEach","callback","useEffect","addEventListener","removeEventListener","onVisibilityChange","push"],"mappings":"4SAUqC,WACnC,IAAAA,EAA0BC,EAAAA,SAAS,GAA5BC,EAAKF,EAAEG,GAAAA,EAAQH,EAAA,GACtBI,EAA8BH,YAAS,GAAhCI,EAAOD,EAAEE,GAAAA,EAAUF,EAAA,GACpBG,EAAuBC,EAAMA,OAAa,IAQ1CC,EAA2B,WAC/BH,EAAwC,YAA7BI,SAASC,iBAChBD,SAASE,QARST,EAAS,SAACU,GAAiB,OAAAA,EAAe,CAAC,GAWjEN,EAAqBO,QAAQC,QAAQ,SAACC,GACpC,OAAAA,EAAsC,YAA7BN,SAASC,gBAA8B,EAEpD,EAYA,OAVAM,EAASA,UAAC,WAER,OADAP,SAASQ,iBAAiB,mBAAoBT,cAE5CC,SAASS,oBACP,mBACAV,EAEJ,CACF,EAAG,IAEI,CAAEP,MAAAA,EAAOG,QAAAA,EAASe,mBAxBE,SAACJ,GAC1BT,EAAqBO,QAAQO,KAAKL,EACpC,EAuBF"}