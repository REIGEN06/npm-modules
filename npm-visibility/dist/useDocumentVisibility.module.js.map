{"version":3,"file":"useDocumentVisibility.module.js","sources":["../src/useDocumentVisibility.ts"],"sourcesContent":["import { useEffect, useRef, useState } from \"react\";\r\n\r\ntype Callback = (isVisible: boolean) => void;\r\n\r\ninterface HookTypes {\r\n  count: number;\r\n  visible: boolean;\r\n  onVisibilityChange: (callback: Callback) => void;\r\n}\r\n\r\nexport const useDocumentVisibility = (): HookTypes => {\r\n  const [count, setCount] = useState(0);\r\n  const [visible, setVisible] = useState(true);\r\n  const onVisibilityCallback = useRef<Callback[]>([]);\r\n\r\n  const increment = () => setCount((currentCount) => currentCount + 1);\r\n\r\n  const onVisibilityChange = (callback: Callback) => {\r\n    onVisibilityCallback.current.push(callback);\r\n  };\r\n\r\n  const DocumentVisibilityHandle = (): void => {\r\n    setVisible(document.visibilityState === \"visible\");\r\n    if (document.hidden) {\r\n      increment();\r\n    }\r\n    onVisibilityCallback.current.forEach((callback) =>\r\n      callback(document.visibilityState === \"visible\")\r\n    );\r\n  };\r\n  console.log(onVisibilityChange);\r\n\r\n  useEffect(() => {\r\n    document.addEventListener(\"visibilitychange\", DocumentVisibilityHandle);\r\n    return () => {\r\n      document.removeEventListener(\r\n        \"visibilitychange\",\r\n        DocumentVisibilityHandle\r\n      );\r\n    };\r\n  }, []);\r\n\r\n  return { count, visible, onVisibilityChange };\r\n};\r\n"],"names":["useDocumentVisibility","_useState","useState","count","setCount","_useState2","visible","setVisible","onVisibilityCallback","useRef","onVisibilityChange","callback","current","push","DocumentVisibilityHandle","document","visibilityState","hidden","currentCount","forEach","console","log","useEffect","addEventListener","removeEventListener"],"mappings":"4DAUa,IAAAA,EAAwB,WACnC,IAAAC,EAA0BC,EAAS,GAA5BC,EAAKF,EAAEG,GAAAA,EAAQH,EACtB,GAAAI,EAA8BH,GAAS,GAAhCI,EAAOD,EAAA,GAAEE,EAAUF,EAC1B,GAAMG,EAAuBC,EAAmB,IAI1CC,EAAqB,SAACC,GAC1BH,EAAqBI,QAAQC,KAAKF,EACpC,EAEMG,EAA2B,WAC/BP,EAAwC,YAA7BQ,SAASC,iBAChBD,SAASE,QARSb,EAAS,SAACc,GAAY,OAAKA,EAAe,CAAC,GAWjEV,EAAqBI,QAAQO,QAAQ,SAACR,GAAQ,OAC5CA,EAAsC,YAA7BI,SAASC,gBAA8B,EAEpD,EAaA,OAZAI,QAAQC,IAAIX,GAEZY,EAAU,WAER,OADAP,SAASQ,iBAAiB,mBAAoBT,GAClC,WACVC,SAASS,oBACP,mBACAV,EAEJ,CACF,EAAG,IAEI,CAAEX,MAAAA,EAAOG,QAAAA,EAASI,mBAAAA,EAC3B"}